;define(function(require){'use strict';var $=require('jquery'),o=require('underscore'),l=require('backbone'),i=require('root/config'),a=require('core/addons-internal'),s=require('text!root/debug.html'),p=require('core/app'),u=require('core/lib/hooks'),e=null;return l.View.extend({initialize:function(p){e=this;var l=$('<div/>').html(s);$('#app-debug-content',l).prepend(a.getHtml('debug_panel','before')).append(a.getHtml('debug_panel','after'));var n=l.html();n=n.replace(/&lt;%/g,'<%');n=n.replace(/%&gt;/g,'%>');e.template=o.template(n);$('#app-debug-button').on('touchstart',e.buttonTapOn).on('touchend',e.buttonTapOff)},render:function(){e.showButton()},renderPanel:function(){var l=$('#app-debug-panel'),n={};var i=a.getHtmlData('debug_panel');n=o.extend(n,i);var s=e.template(n);l.html(s);$('#app-debug-header .app-panel-close').on('touchstart',e.closePanelTapOn).on('touchend',e.closePanelTapOff);$('#app-debug-content .app-button').on('touchstart',e.panelButtonTapOn).on('touchend',e.panelButtonTapOff);$('#reset-options').on('touchend',e.resetOptions);p.triggerInfo('debug-panel:render',{debug_view:e});return l},openPanel:function(){var n=e.renderPanel();n.velocity({left:0},{duration:500,display:'block'});setTimeout(function(){$('#app-debug-button').velocity({opacity:0},{duration:200,queue:!1,display:'none'})},250)},closePanel:function(){var n=$('#app-debug-panel');n.velocity({left:-5000},{duration:500,display:'none'});e.showButton()},showButton:function(){var e=$('#app-debug-button');e.velocity({left:[10,-60],opacity:.9},{duration:500,easing:[70,8],display:'block'})},buttonTapOn:function(){var e=$(this),n=e.offset().top+1,o=e.offset().left+1;e.css({top:n,left:o})},buttonTapOff:function(){var n=$(this),o=n.offset().top-1,a=n.offset().left-1;n.css({top:o,left:a});e.openPanel()},closePanelTapOn:function(){$(this).removeClass('app-panel-close-off').addClass('app-panel-close-on')},closePanelTapOff:function(){$(this).removeClass('app-panel-close-on').addClass('app-panel-close-off');e.closePanel()},panelButtonTapOn:function(){$(this).removeClass('app-button-off').addClass('app-button-on')},panelButtonTapOff:function(){$(this).removeClass('app-button-on').addClass('app-button-off')},resetOptions:function(){p.options.resetAll();p.saveOptions(e.confirmReset)},confirmReset:function(){var t=e.renderPanel();e.displayFeedback('Options successfully reset')},displayFeedback:function(e,n,a){if(o.isUndefined(n)||o.isEmpty(n)){n='info'};if(o.isUndefined(a)){a=3000};var p=$('#app-debug-feedback');p.html(e).slideDown();setTimeout(function(){p.slideUp()},a)}})});