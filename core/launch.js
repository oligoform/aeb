;require.config({baseUrl:'vendor',waitSeconds:10,paths:{core:'../core',lang:'../lang',addons:'../addons',root:'..'},shim:{'backbone':{deps:['underscore','jquery'],exports:'Backbone'},'underscore':{exports:'_'}}});require(['root/config'],function(e){if(e.app_type==='pwa'&&'serviceWorker' in navigator){navigator.serviceWorker.register(e.app_path+'service-worker-cache.js').then(function(){console.log('[WP-AppKit Service Worker] Registered')})};var n={theme:'../themes/'+e.theme};require.config({paths:n});require(['jquery','underscore','core/addons-internal','core/app-utils','core/app','core/router','core/region-manager','core/stats','core/phonegap/utils','core/lib/hooks'],function($,c,s,r,n,d,i,t,a,f){var u=function(){require(s.getJs('init','before'),function(){n.setIsLaunching(!0);n.initialize(function(){i.buildHead(function(){i.buildLayout(function(){i.buildHeader(function(){n.router=new d();require(s.getJs('theme','before'),function(){require(['theme/js/functions'],function(){i.handleNavigationInterception();var o=['single','archive'];o=f.applyFilters('preloaded-templates',o,[]);o=c.map(o,function(e){if(e.indexOf('/')===-1){e='theme/'+e};return'text!'+e+'.html'});require(o,function(){require(s.getJs('theme','after'),function(){n.sync(function(o){i.buildMenu(function(){t.updateVersion();t.incrementCountOpen();t.incrementLastOpenTime();if(e.debug_mode=='on'){r.log('App version : ',t.getVersionDiff());r.log('App opening  count : ',t.getCountOpen());r.log('Last app opening  was on ',t.getLastOpenDate())};n.launchRouting();if(o){o.resolve({ok:!0,message:'',data:{}})};n.triggerInfo('app-launched');if(n.getParam('refresh-at-app-launch')){require(['core/theme-app'],function(e){var o=t.getStats('last_sync'),i=n.options.get('refresh_interval');if(undefined===o||undefined===i||Date.now()>o+(i.get('value')*1000)){r.log('Refresh interval exceeded, refreshing',{last_updated:new Date(o),refresh_interval:i.get('value')});e.refresh()}})};a.hideSplashScreen();n.setIsLaunching(!1)})},function(e,o){n.launchRouting();var t='Error : App could not synchronize with website';if(e.id==='synchro:no-component'){t+=' : no component found in web service answer. Please add components to the App on WordPress side.'};r.log(t);if(o){o.reject({ok:!1,message:t,data:e})};n.triggerInfo('no-content');a.hideSplashScreen();n.setIsLaunching(!1)},!1)})},function(e){r.log('Error : could not preload templates',e);n.setIsLaunching(!1)})},function(e){r.log('Error : theme/js/functions.js not found',e);n.setIsLaunching(!1)})})})})})})})};if(a.isLoaded()){a.setNetworkEvents(n.onOnline,n.onOffline);document.addEventListener('deviceready',u,!1)}else{window.ononline=n.onOnline;window.onoffline=n.onOffline;$(document).ready(u)}})},function(){var e='WP AppKit error : config.js not found.';console&&console.log(e);document.write(e);var n=window.location.search.substring(1);if(n.length&&n.indexOf('wpak_app_id')!=-1){e='Please check that : ';e+='<br/> - you are connected to your WordPress back office,';e+='<br/> - WordPress permalinks are activated';console&&console.log(e);document.write('<br>'+e)}});